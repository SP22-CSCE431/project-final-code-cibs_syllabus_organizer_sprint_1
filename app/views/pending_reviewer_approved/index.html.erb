<h1 style="padding-left: 5%">Pending Reviewer Approved</h1>

<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 90%;
}
.center {
  margin-left: auto;
  margin-right: auto;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
</style>

<table class="center">
  <thead>
    <tr>
        <th>Syllabus PDF</th>
        <th>Semester Approved</th>
        <th>Foreign School Name</th>
        <th>TAMU Course Department</th>
        <th>TAMU Course Number</th>
        <th>Student Major</th>
        <th>Student Classification</th>
        <th>Approve/Reject</th>
    </tr>
  </thead>

  <tbody>
    <% @foreign_courses.each do |foreign_course| %>
      <tr>
        <td><%= link_to foreign_course.syllabus.filename, rails_blob_path(foreign_course.syllabus, disposition: :attachment) %></td>
        <td><%= foreign_course.semester_approved %></td>
        <td><%= University.where(id: foreign_course.university_id).last.university_name %></td>
        <td><%= TamuDepartment.where(id: foreign_course.tamu_department_id).last.tamu_department_name %></td>
        <td><%= TamuCourse.where(id: ForeignCoursesTamuCourse.where(foreign_course_id: foreign_course.id).last.tamu_course_id).last.course_num%></td>
        <td><%= Student.where(id: ForeignCoursesStudent.where(foreign_course_id: foreign_course.id).last.student_id).last.tamu_major %></td>
        <td><%= Student.where(id: ForeignCoursesStudent.where(foreign_course_id: foreign_course.id).last.student_id).last.classification %></td>
        <td>
          <% @foreign_courses_students.each do |foreign_courses_student| %>
            <%= form_with(model: foreign_courses_student ) do |form| %>
              <% if foreign_courses_student.foreign_course_id == foreign_course.id %>
                <p>Current Status: 
                  <% if  ForeignCoursesStudent.where(foreign_course_id: foreign_course.id).last.admin_course_approval == true  %>
                    Approved </p>
                  <% elsif ForeignCoursesStudent.where(foreign_course_id: foreign_course.id).last.admin_course_approval == false %>
                    Pending... </p>
                  <% else %>
                    Rejected </p>
                  <% end %>
                <%= form.select :admin_course_approval, [["Approve",true], ["Reject", nil]] %>          
                <div class="actions">
                  <%= form.submit %>
                </div>
              <% end %>
            <% end %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>